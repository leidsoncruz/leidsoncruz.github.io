<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8" />

  
  <title>Transform Medium to Markdown</title>

  
  
  <link href="//cdn.jsdelivr.net" rel="dns-prefetch">
  <link href="//cdnjs.cloudflare.com" rel="dns-prefetch">
  
  <link href="//at.alicdn.com" rel="dns-prefetch">
  
  <link href="//fonts.googleapis.com" rel="dns-prefetch">
  <link href="//fonts.gstatic.com" rel="dns-prefetch">
  
  
  
  <link href="//www.google-analytics.com" rel="dns-prefetch">
  

  

  
  
  <meta name="description" content="Motivation In the last year(2018), I and my friend heliocorreia talk about make the personal website and make post on it. But, I different from him didn’t want create one blog system for post. I thinked, why not use Medium with as my publication platform and I build a script to migrate from Medium to Markdown?
">

  
  
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@gohugoio">
    <meta name="twitter:title" content="Transform Medium to Markdown">
    <meta name="twitter:description" content="Motivation In the last year(2018), I and my friend heliocorreia talk about make the personal website and make post on it. But, I different from him didn’t want create one blog system for post. I thinked, why not use Medium with as my publication platform and I build a script to migrate from Medium to Markdown?
">
    <meta name="twitter:image" content="/images/avatar.jpg">
  

  
  <meta property="og:type" content="article">
  <meta property="og:title" content="Transform Medium to Markdown">
  <meta property="og:description" content="Motivation In the last year(2018), I and my friend heliocorreia talk about make the personal website and make post on it. But, I different from him didn’t want create one blog system for post. I thinked, why not use Medium with as my publication platform and I build a script to migrate from Medium to Markdown?
">
  <meta property="og:url" content="https://leidson.com/post/transform-medium-to-markdown/">
  <meta property="og:image" content="/images/avatar.jpg">




<meta name="generator" content="Hugo 0.55.6">


<link rel="canonical" href="https://leidson.com/post/transform-medium-to-markdown/">

<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="format-detection" content="telephone=no,email=no,adress=no">
<meta http-equiv="Cache-Control" content="no-transform">


<meta name="robots" content="index,follow">
<meta name="referrer" content="origin-when-cross-origin">







<meta name="theme-color" content="#02b875">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Leidson Cruz">
<meta name="msapplication-tooltip" content="Leidson Cruz">
<meta name='msapplication-navbutton-color' content="#02b875">
<meta name="msapplication-TileColor" content="#02b875">
<meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
<link rel="icon" href="https://leidson.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://leidson.com/icons/icon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://leidson.com/icons/icon-32x32.png">
<link rel="icon" sizes="192x192" href="https://leidson.com/icons/icon-192x192.png">
<link rel="apple-touch-icon" href="https://leidson.com/icons/icon-152x152.png">
<link rel="manifest" href="https://leidson.com/manifest.json">


<link rel="preload" href="https://leidson.com/styles/main-rendered.min.css" as="style">


<link rel="preload" href="https://fonts.googleapis.com/css?family=Lobster" as="style">
<link rel="preload" href="https://leidson.com/images/avatar.jpg" as="image">
<link rel="preload" href="https://leidson.com/images/grey-prism.svg" as="image">


<style>
  body {
    background: rgb(244, 243, 241) url('/images/grey-prism.svg') repeat fixed;
  }
</style>
<link rel="stylesheet" href="https://leidson.com/styles/main-rendered.min.css">


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster">



<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.2/dist/medium-zoom.min.js"></script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/video.js@7.3.0/dist/video-js.min.css">



  
  
<!--[if lte IE 8]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/videojs-ie8@1.1.2/dist/videojs-ie8.min.js"></script>
<![endif]-->

<!--[if lte IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/eligrey-classlist-js-polyfill@1.2.20180112/classList.min.js"></script>
<![endif]-->


</head>
  <body>
    <div class="suspension">
      <a role="button" aria-label="Go to top" title="Go to top" class="to-top is-hide"><span class="icon icon-up" aria-hidden="true"></span></a>
      
        
      
    </div>
    
    
  <header class="site-header">
  <img class="avatar" src="https://leidson.com/images/avatar.jpg" alt="Avatar">
  
  <h2 class="title"><a style="opacity:1;" href="https://leidson.com/">Leidson Cruz</a></h2>
  
  <p class="subtitle">~ Software Engineer ~</p>
  <button class="menu-toggle" type="button" aria-label="Main Menu" aria-expanded="false" tab-index="0">
    <span class="icon icon-menu" aria-hidden="true"></span>
  </button>

  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item
          
          
          ">
          <a href="https://leidson.com/post/">Posts</a>
        </li>
      
        <li class="menu-item
          
          
          ">
          <a href="https://leidson.com/tags/">Tags</a>
        </li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list"><li class="social-item">
          <a href="mailto:leidson89@gmail.com" title="Email" aria-label="Email">
            <span class="icon icon-email" aria-hidden="true"></span>
          </a>
        </li><li class="social-item">
          <a href="//github.com/leidsondias" rel="me" title="GitHub" aria-label="GitHub">
	    <span class="icon icon-github" aria-hidden="true"></span>
          </a>
        </li><li class="social-item">
          <a href="//medium.com/@leidsoncruz" rel="me" title="Medium" aria-label="Medium">
            <span class="icon icon-medium" aria-hidden="true"></span>
          </a>
        </li><li class="social-item">
          <a href="//www.linkedin.com/in/leidsondias" rel="me" title="LinkedIn" aria-label="LinkedIn">
            <span class="icon icon-linkedin" aria-hidden="true"></span>
          </a>
        </li></ul>
  </nav>
</header>

  <section class="main post-detail">
    <header class="post-header">
      <h1 class="post-title">Transform Medium to Markdown</h1>
      <p class="post-meta">@Leidson Cruz · May 27, 2019 · 6 min read</p>
    </header>
    <article class="post-content"><h2 id="motivation">Motivation</h2>

<p>In the last year(2018), I and my friend <a href="https://medium.com/@heliocorreia">heliocorreia</a> talk about make the personal website and make post on it. But, I different from him didn’t want create one blog system for post. I thinked, why not use Medium with as my publication platform and I build a script to migrate from Medium to Markdown?</p>

<h2 id="existent-s-libs"><strong>Existent’s Libs</strong></h2>

<p>So, I started search Libs with this functionalities. I found a lot of libs, but I most liked from two.</p>

<ul>
<li><p><a href="https://domchristie.github.io/turndown/">Turndown</a></p></li>

<li><p><a href="https://github.com/xdamman/mediumexporter">Medium exporter</a></p></li>
</ul>

<p>For me, the Medium Exporter is the better. Is very simple to use and work perfect.</p>

<h2 id="decide-what-i-m-going-to-use-and-how-i-m-going-to-do-the-script">Decide what I’m going to use and how I’m going to do the script</h2>

<p>Ok, I found and now I know it’s possible make what I want. Ok, let’s go start from zero one Lib to transform Medium to Markdown and using stuffs I not use at now with much frequency. Per example, Python.</p>

<p>Why Python? I used Python because I like this language and has a some time I don’t work with it. Is not because is the better or anything else. I like and want make the new project with it.</p>

<p>None<strong>Test</strong>-<strong>driven development</strong></p>

<p>Another thing what I used is <a href="https://en.wikipedia.org/wiki/Test-driven_development">TDD</a>. I like this technique but I not use every time. It’s a habit what I need practice. Today I make tests after make the code.</p>

<p>My first reading about TDD was the <a href="http://blog.thiagobelem.net/aprendendo-tdd-ou-desenvolvimento-orientado-a-testes">Thiago Belem post</a>. Later I had the opportunity to take the Industrial Logic course. The course was about TDD and Refactor. It’s a very good course, but what I most liked was the Refactor topic. In fact, is a good topic for talking about.</p>

<p>NoneParadigm</p>

<p>Now, I have the language and what technique I will use. What is missing?</p>

<p>The programming paradigm I want to use. I guess the <a href="https://en.wikipedia.org/wiki/Object-oriented_programming">OOP</a> is most easy to understand. But I don’t need reuse code, extend classes, polymorphism or another thing with OOP give to me.</p>

<p>So, I used <a href="https://en.wikipedia.org/wiki/Functional_programming">Functional programming</a>. What I have on my script is immutable state and pure functions. To be clear, I prefer OOP. But for me, you must use what your problem needs and not what you want.</p>

<h2 id="challenges"><strong>Challenges</strong></h2>

<p>I needed to remember a lot of things about Python. How to use some methods and etc. But, my main challenge was add markups into the text without affect anything.</p>

<p>The Medium post payload after make parser to JSON is some like this:</p>

<pre><code>...
“paragraphs”: [{
 “name”: “7854”,
 “type”: 3,
 “text”: “Web Components with Redux”,
 “markups”: []
 }, {
      &quot;name&quot;: &quot;0c36&quot;,
      &quot;type&quot;: 1,
      &quot;text&quot;: &quot;The Web Components has a method called observedAttributes , works this way: every time is your observed attribute change, his call an another method called as attributeChangedCallback . This second method has a three parameters: name, oldValue and newValue.&quot;,
      &quot;markups&quot;: [{
       &quot;type&quot;: 10,
       &quot;start&quot;: 39,
       &quot;end&quot;: 57
      }, {
       &quot;type&quot;: 10,
       &quot;start&quot;: 159,
       &quot;end&quot;: 183
      }, {
       &quot;type&quot;: 3,
       &quot;start&quot;: 39,
       &quot;end&quot;: 56,
       &quot;href&quot;: &quot;[https://developers.google.com/web/fundamentals/web-components/customelements#attrchanges](https://developers.google.com/web/fundamentals/web-components/customelements#attrchanges)&quot;,
       &quot;title&quot;: &quot;&quot;,
       &quot;rel&quot;: &quot;&quot;,
       &quot;anchorType&quot;: 0
      }, {
       &quot;type&quot;: 3,
       &quot;start&quot;: 159,
       &quot;end&quot;: 183,
       &quot;href&quot;: &quot;[https://developers.google.com/web/fundamentals/web-components/customelements#attrchanges](https://developers.google.com/web/fundamentals/web-components/customelements#attrchanges)&quot;,
       &quot;title&quot;: &quot;&quot;,
       &quot;rel&quot;: &quot;&quot;,
       &quot;anchorType&quot;: 0
      }, {
       &quot;type&quot;: 2,
       &quot;start&quot;: 229,
       &quot;end&quot;: 244
      }, {
       &quot;type&quot;: 2,
       &quot;start&quot;: 247,
       &quot;end&quot;: 256
      }]
     },
...
</code></pre>

<p>If I iterate the paragraphs and get the markups and add to the text. The next paragraph with markup will be affect with the previous markup and we will have a problem.</p>

<p>One resolution for this problem is save the number of char on the aux variable. Apply on the copy of text without touching on the original text.</p>

<p>Another solution is use aux variable to stop and concatenate the strings. And merge with rest of text.</p>

<p>So I talked with my both friends from my company (<a href="https://medium.com/@fabiomatias">Fábio Matias</a> and Daniel Magro). The both given to me good ideas to add the markups. I merged the ideas to make the below solution.</p>

<p>First, I sort the array of paragraphs with the keys: <strong>start</strong> and <strong>type</strong>.</p>

<pre><code>markups = sorted(paragraph.get('markups'), key=lambda m: (m.get('start'), m.get('type')))
</code></pre>

<p>Second, I iterated the array checking if have one more markup into the text and I remove if has. I keep only one in the ascendent order. I will go to improve for apply more than one markup. For apply more than one I need control the original text and extract the word what I want change. After merge the all markups.</p>

<pre><code>markups = [mark for mark in markups if mark.get('start') not in seen and not seen.add(mark.get('start'))][::-1]
</code></pre>

<p>For last I reverse the array <code>[::-1]</code>. Because when I will add the markups, I not make any changes for the firsts markups. How this I not change the text and not need have the control when I add the markup.</p>

<h2 id="automatization-process">Automatization process</h2>

<p>I didn’t want keep one <a href="https://en.wikipedia.org/wiki/Cron">Cron</a> running because I don’t know what with frequency I will can write the posts. So instead of use active job for this, I want to use reactive job. Every time when I publish the post on Medium, create a new post on my website.</p>

<p>NoneChrome extension</p>

<p>My idea is create a chrome extension. When I am on the Medium page, it listening when I publish the article and trigger my script.</p>

<p>I had some difficulty for make the chrome extension call the python or bash script. I didn’t find any example for execute scripts on the MacOS. Just for the Windows OS.</p>

<p>I got it open the calculator, Spotify apps. But every time when I tried to open the terminal, it did open and closes instantly.</p>

<p>I did spend a lot of time trying to make the extension calls directly the script. I not had the expected result what I did want. So, I decided create a shortcut for copy the active URL and merge with my full instruction for run the python script.</p>

<p>I hope in the future I improve the extension for call the python script and I don’t need execute on the terminal.</p>

<h2 id="conclusion">Conclusion</h2>

<p>I never had read about make a Chrome extension. In generally I don’t like the google documentation. But, the documentation about extension is OK.</p>

<p>I liked the challenge for create the extension, and understand how what the <a href="https://developer.chrome.com/apps/nativeMessaging">NativeMessaging</a> works. The difference between <code>background</code> and <code>content</code>scripts.</p>

<p>So what I think is important you know about creating a Chrome extension:</p>

<ul>
<li><p><em>Background script</em>: It’s your the central event. Has the access for all Chrome API.</p></li>

<li><p><em>Content script</em>: executes in an isolated context of the webpage, has access to DOM and has very limited access to Chrome API.</p></li>

<li><p>*chrome.runtime.sendMessage *: sends a message to your background script.
Ex: <code>chrome.runtime.sendMessage({ copy: true })</code></p></li>

<li><p><em>chrome.runtime.onMessage.addListener</em>: Have the responsibility for listening when script receiver any message. You can use on the content and background scripts.</p></li>

<li><p><em>chrome.commands.onCommand.addListener</em>:* *It’s called when any shortcut is fired.</p></li>

<li><p><em>chrome.tabs.sendMessage</em>: Sends a single message into the specified tab.</p></li>
</ul>

<p>Another approach what I can use is create a server. And every time I create the post, I make a AJAX request for server and it call the transformer script.
I created the server using docker for run in background, but for run the script and make the deploy I need dockerize all my project. So, I’ll leave to do this later. But when I will do, I will updated the github.</p>

<p>You can access the chrome extension code <a href="https://github.com/leidsondias/site/tree/master/scripts/chrome_extension">here</a> and the python code <a href="https://github.com/leidsondias/site/tree/master/scripts/python">here</a>.</p>

<p>You can see the result for transform script into the <a href="https://leidson.com/">https://leidson.com/</a> , just the Hello post don’t use the transform script. All others use.</p>

<p>The original post is <a href="https://medium.com/@leidsoncruz/transform-medium-to-markdown-1e0cc216843f">https://medium.com/@leidsoncruz/transform-medium-to-markdown-1e0cc216843f</a></p></article>
    <footer class="post-footer">
      
      <ul class="post-tags">
        
          <li><a href="https://leidson.com/tags/javascript"><span class="tag">JavaScript</span></a></li>
        
          <li><a href="https://leidson.com/tags/m%C3%A9dium"><span class="tag">Médium</span></a></li>
        
          <li><a href="https://leidson.com/tags/python"><span class="tag">Python</span></a></li>
        
          <li><a href="https://leidson.com/tags/chrome-extension"><span class="tag">Chrome Extension</span></a></li>
        
      </ul>
      
      <p class="post-copyright">
        
      </p>
    </footer>
    
      
    
  </section>
  
<footer class="site-footer">
  <p>© 2017-2019 Leidson Cruz</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank" rel="noopener">Nuo</a>.</p>
  
</footer>


<script src="https://cdn.jsdelivr.net/npm/smooth-scroll@15.0.0/dist/smooth-scroll.min.js"></script>



<script async src="https://cdn.jsdelivr.net/npm/video.js@7.3.0/dist/video.min.js"></script>




<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    },
  });
</script>
<script type="text/x-mathjax-config">
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script>



<script src="https://leidson.com/scripts/index.min.js"></script>

<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('\/service-worker.js').then(function() {
      console.log('[ServiceWorker] Registered');
    });
  }
</script>




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-140735682-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







  </body>
</html>
